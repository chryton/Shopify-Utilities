{%- comment -%}This snippet structures the micro-data using JSON-LD specification{%- endcomment -%}



<script id="seo--schema" type="application/ld+json">
  {
    "@context": "http://schema.org",
    {%- if template contains 'product' -%}
    "@type": "Product",
    "offers": {
      "@type": "Offer",
      "availability": {%- if product.available -%}"//schema.org/InStock"{%- else -%}"//schema.org/OutOfStock"{%- endif -%},
      "price": {{ product.price_min | money_without_currency | json }},
      {%- if variant.inventory_management == "shopify" and variant.inventory_policy != "continue" -%}
        "inventoryLevel" : {{ product.variants.first.inventory_quantity | json }},
      {%- endif -%}
      "priceCurrency": {{ shop.currency | json }}
    },
    {%- unless product.vendor == blank -%}
      "brand": {{ product.vendor | json }},
    {%- endunless -%}
    "name": {{ product.title | json }},
    "description": {{ product.description | strip_html | newline_to_br | json }},
    {%- unless product.type == blank -%}
      "category": {{ product.type | json }},
    {%- endunless -%}
    "identifier": "{{ canonical_url }}",
    "url": "{{ shop.url }}{{ product.url }}",
    "itemCondition": "New",
    "productID": {{ product.id }},
    {%- unless product.sku == blank -%}
      "sku": "{{ product.variants.first.sku }}",
    {%- endunless -%}
    {%- unless product.metafields.yotpo.reviews_average == blank -%}
      "aggregateRating": {
        "@type": "AggregateRating",
        "bestRating": "5.0",
        "worstRating": "0.0",
        "ratingCount": {{ product.metafields.yotpo.reviews_count | json }},
        "ratingValue": {{ product.metafields.yotpo.reviews_average | json }}
    },
    {%- endunless -%}
    "image": {
      "@type": "ImageObject",
      "url": "https:{{ product.featured_image | img_url: '1024x1024', format: 'pjpg' }}",
      "contentUrl": "https:{{ product.featured_image | img_url: '1024x1024', format: 'pjpg' }}",
      "image": "https:{{ product.featured_image | img_url: '1024x1024', format: 'pjpg' }}",
      "thumbnailUrl": "https:{{ product.featured_image | img_url: '480x480', format: 'pjpg' }}",
      "encodingFormat": "image/jpeg",
      "name": {{ product.featured_image.alt | default: product.title | json }},
      "width": {
        "@type": "QuantitativeValue",
        "unitCode": "E37",
        "unitText": "Pixel",
        "value": "1024"
      },
      "height": {
        "@type": "QuantitativeValue",
        "unitCode": "E37",
        "unitText": "Pixel",
        "value": "1024"
      }
    }
{%- elsif template contains 'article' -%}
    "@type": "BlogPosting",
    "mainEntityOfPage": "{{ article.url }}",
    "articleSection": {{ blog.title | json }},
    "keywords": "{{ article.tags | join: ', ' }}",
    "headline": {{ article.title | json }},
    "description": {{ article.excerpt_or_content | strip_html | truncatewords: 25 | json }},
    "dateCreated": "{{ article.created_at | date: '%Y-%m-%dT%T' }}",
    "datePublished": "{{ article.published_at | date: '%Y-%m-%dT%T' }}",
    "dateModified": "{{ article.published_at | date: '%Y-%m-%dT%T' }}",
    "image": {
      "@type": "ImageObject",
      "url": "https:{{ article.image | img_url: '1024x1024' }}",
      "image": "https:{{ article.image | img_url: '1024x1024' }}",
      "name": {{ article.image.alt | json }},
      "width": 1024,
      "height": 1024
    },
    "author": {
      "@type": "Person",
      "name": "{{ article.user.first_name | escape }} {{ article.user.last_name | escape }}",
      "givenName": {{ article.user.first_name | json }},
      "familyName": {{ article.user.last_name | json }}
    },
    "publisher": {
      "@type": "Organization",
      "name": {{ shop.name | json }},
      "logo": {
        "@type": "ImageObject",
        "url": "https:{{ 'logo.png' | asset_url }}",
        "image": "https:{{ 'logo.png' | asset_url }}",
        "name": {{ shop.name | json }},
        "width": 100,
        "height": 100
      }
    },
    "commentCount": {{ article.comments_count }},
    "comment": [
      {%- for comment in article.comments limit: 5 -%}
        {
          "@type": "Comment",
          "author": {{ comment.author | json }},
          "datePublished": "{{ comment.created_at | date: '%Y-%m-%dT%T' }}",
          "text": {{ comment.content | json }}
        }{%- unless forloop.last -%},{%- endunless -%}
      {%- endfor -%}
    ]
{%- endif -%}
  }


</script>


